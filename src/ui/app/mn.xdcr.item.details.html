<div class="indent-1 cursor-auto">
  <div class="row flex-right">
    <button
       [hidden]="!(permissions | async)?.cluster.bucket[item.source].xdcr.write"
       (click)="$event.stopPropagation();onDeleteReplication.next(item)"
       class="outline margin-right-quarter">
      Delete
    </button>

    <button
       [hidden]="!((permissions | async)?.cluster.bucket[item.source].xdcr.write &&
                 (permissions | async)?.cluster.xdcr.settings.write)"
       [uiParams]="{item: item}"
       uiSref="app.admin.replications.edit"
       class="outline margin-right-quarter">
      Edit
    </button>
    <button
       (click)="$event.stopPropagation();form.submit.next(item)"
       class="fix-width-2 replication">
      <span>{{status | async | mnReplicationStatus}}</span>
      <div
         [hidden]="item.status == 'notRunning' ||
                   !(permissions | async)?.cluster.bucket[item.source].xdcr.execute"
         class="icon margin-left-half"
         [ngClass]="statusClass | async"></div>
    </button>
  </div>

  <div
     *ngIf="areThereMappingRules | async"
     class="row flex-column items-top margin-bottom-half"
     (click)="$event.stopPropagation();">
    <p
       class="text-medium margin-0 disclosure"
       [ngClass]="{disclosed: (toggler.state | async)}"
       (click)="toggler.click.next()">
      Mapping Rules
    </p>
    <mn-xdcr-mapping-rules
       *ngIf="toggler.state | async"
       [isMigrationMode]="isMigrationMode"
       [isExplicitMappingMode]="isExplicitMappingMode"
       [explicitMappingRules]="explicitMappingRules"
       [explicitMappingMigrationRules]="explicitMappingMigrationRules">
    </mn-xdcr-mapping-rules>
  </div>
  <mn-detail-stats
     bucket="{{item.source}}"
     mnTitle="XDCR Stats"
     itemId="{{item.id}}"
     service="xdcr"
     prefix="replications"
  ></mn-detail-stats>
</div>
