<!--
Copyright 2024-Present Couchbase, Inc.

Use of this software is governed by the Business Source License included in
the file licenses/BSL-Couchbase.txt.  As of the Change Date specified in that
file, in accordance with the Business Source License, use of this software will
be governed by the Apache License, Version 2.0, included in the file
licenses/APL2.txt.
-->

<div class="sign-in-background"></div>
<div class="row flex-center items-top dialog_main_wrapper">
  <div>
    <div class="panel dialog-small dialog">
      <div class="panel-header">
        <img
          src="/cb_logo_bug_white.svg"
          width="40"
          height="40"
          class="logobug"
          alt="Couchbase Server"
        />
        <h2>Provide New Password</h2>
      </div>
      <form
        (ngSubmit)="form.submit.next()"
        [formGroup]="form.group"
        #ngForm="ngForm"
        class="forms"
        novalidate
      >
        <div class="panel-content">
          <div class="formrow">
            <input
              type="password"
              autocorrect="off"
              spellcheck="false"
              autocapitalize="off"
              id="new-password-input"
              name="password"
              placeholder="New Password"
              formControlName="password"
            />
            <div
              [hidden]="!(form.group.get('password').touched || ngForm.submitted)"
              class="error error-field"
            >
              <div [hidden]="!form.group.get('password').errors?.required">
                New Password is required.
              </div>
              <div [hidden]="!form.group.get('password').errors?.minlength">
                A password of at least six characters is required.
              </div>
            </div>
            <div
              [hidden]="!(postChangePassword.error | async)?.errors?.password"
              class="error error-field"
            >
              {{(postChangePassword.error | async)?.errors?.password}}
            </div>
          </div>

          <div class="formrow">
            <input
              type="password"
              autocorrect="off"
              spellcheck="false"
              autocapitalize="off"
              id="confirm-password-input"
              name="confirmPassword"
              placeholder="Confirm Password"
              formControlName="confirmPassword"
            />
            <div
              [hidden]="!(form.group.get('confirmPassword').touched || ngForm.submitted)"
              class="error error-field"
            >
              <div
                [hidden]="!form.group.get('confirmPassword').errors?.required"
              >
                Confirm New Password is required.
              </div>
              <div [hidden]="!form.group.errors?.passwordMismatch">
                The password and verify password fields do not match.
              </div>
            </div>
          </div>
        </div>
        <div class="panel-footer flex-end">
          <button [disabled]="form.group.invalid" type="submit">
            Change Password
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
