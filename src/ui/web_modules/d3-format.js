function t(t,n){if((r=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var r,i=t.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+t.slice(r+1)]}function n(n){return(n=t(Math.abs(n)))?n[1]:NaN}var r,i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function e(t){if(!(n=i.exec(t)))throw new Error("invalid format: "+t);var n;return new o({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}function o(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function a(n,r){var i=t(n,r);if(!i)return n+"";var e=i[0],o=i[1];return o<0?"0."+new Array(-o).join("0")+e:e.length>o+1?e.slice(0,o+1)+"."+e.slice(o+1):e+new Array(o-e.length+2).join("0")}e.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var s={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return a(100*t,n)},r:a,s:function(n,i){var e=t(n,i);if(!e)return n+"";var o=e[0],a=e[1],s=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=o.length;return s===u?o:s>u?o+new Array(s-u+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+t(n,Math.max(0,i+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function u(t){return t}var c,h,l,f=Array.prototype.map,m=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function d(t){var i,o,a=void 0===t.grouping||void 0===t.thousands?u:(i=f.call(t.grouping,Number),o=t.thousands+"",function(t,n){for(var r=t.length,e=[],a=0,s=i[0],u=0;r>0&&s>0&&(u+s+1>n&&(s=Math.max(1,n-u)),e.push(t.substring(r-=s,r+s)),!((u+=s+1)>n));)s=i[a=(a+1)%i.length];return e.reverse().join(o)}),c=void 0===t.currency?"":t.currency[0]+"",h=void 0===t.currency?"":t.currency[1]+"",l=void 0===t.decimal?".":t.decimal+"",d=void 0===t.numerals?u:function(t){return function(n){return n.replace(/[0-9]/g,(function(n){return t[+n]}))}}(f.call(t.numerals,String)),g=void 0===t.percent?"%":t.percent+"",p=void 0===t.minus?"-":t.minus+"",v=void 0===t.nan?"NaN":t.nan+"";function M(t){var n=(t=e(t)).fill,i=t.align,o=t.sign,u=t.symbol,f=t.zero,M=t.width,y=t.comma,x=t.precision,b=t.trim,w=t.type;"n"===w?(y=!0,w="g"):s[w]||(void 0===x&&(x=12),b=!0,w="g"),(f||"0"===n&&"="===i)&&(f=!0,n="0",i="=");var k="$"===u?c:"#"===u&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S="$"===u?h:/[%p]/.test(w)?g:"",z=s[w],A=/[defgprs%]/.test(w);function N(t){var e,s,u,c=k,h=S;if("c"===w)h=z(t)+h,t="";else{var g=(t=+t)<0;if(t=isNaN(t)?v:z(Math.abs(t),x),b&&(t=function(t){t:for(var n,r=t.length,i=1,e=-1;i<r;++i)switch(t[i]){case".":e=n=i;break;case"0":0===e&&(e=i),n=i;break;default:if(!+t[i])break t;e>0&&(e=0)}return e>0?t.slice(0,e)+t.slice(n+1):t}(t)),g&&0==+t&&(g=!1),c=(g?"("===o?o:p:"-"===o||"("===o?"":o)+c,h=("s"===w?m[8+r/3]:"")+h+(g&&"("===o?")":""),A)for(e=-1,s=t.length;++e<s;)if(48>(u=t.charCodeAt(e))||u>57){h=(46===u?l+t.slice(e+1):t.slice(e))+h,t=t.slice(0,e);break}}y&&!f&&(t=a(t,1/0));var N=c.length+t.length+h.length,j=N<M?new Array(M-N+1).join(n):"";switch(y&&f&&(t=a(j+t,j.length?M-h.length:1/0),j=""),i){case"<":t=c+t+h+j;break;case"=":t=c+j+t+h;break;case"^":t=j.slice(0,N=j.length>>1)+c+t+h+j.slice(N);break;default:t=j+c+t+h}return d(t)}return x=void 0===x?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),N.toString=function(){return t+""},N}return{format:M,formatPrefix:function(t,r){var i=M(((t=e(t)).type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(n(r)/3))),a=Math.pow(10,-o),s=m[8+o/3];return function(t){return i(a*t)+s}}}}function g(t){return c=d(t),h=c.format,l=c.formatPrefix,c}function p(t){return Math.max(0,-n(Math.abs(t)))}function v(t,r){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(r)/3)))-n(Math.abs(t)))}function M(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,n(r)-n(t))+1}g({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});export{o as FormatSpecifier,h as format,g as formatDefaultLocale,d as formatLocale,l as formatPrefix,e as formatSpecifier,p as precisionFixed,v as precisionPrefix,M as precisionRound};
//# sourceMappingURL=d3-format.js.map
