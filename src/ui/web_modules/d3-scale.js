import{range as n,bisect as t,tickStep as r,ticks as e,tickIncrement as u,ascending as a,quantile as o,bisector as i}from"./d3-array.js";import{formatSpecifier as c,precisionFixed as f,precisionRound as l,precisionPrefix as s,formatPrefix as h,format as p}from"./d3-format.js";import{timeMillisecond as g,timeSecond as m,timeMinute as d,timeHour as v,timeDay as y,timeWeek as M,timeMonth as w,timeYear as k,utcMinute as N,utcHour as x,utcDay as b,utcWeek as A,utcMonth as q,utcYear as S}from"./d3-time.js";import{timeFormat as D,utcFormat as I}from"./d3-time-format.js";import{i as O,k as R,l as j,B as E}from"./common/index-1654fcb4.js";function L(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n)}return this}function F(n,t){switch(arguments.length){case 0:break;case 1:"function"==typeof n?this.interpolator(n):this.range(n);break;default:this.domain(n),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const P=Symbol("implicit");function T(){var n=new Map,t=[],r=[],e=P;function u(u){var a=u+"",o=n.get(a);if(!o){if(e!==P)return e;n.set(a,o=t.push(u))}return r[(o-1)%r.length]}return u.domain=function(r){if(!arguments.length)return t.slice();t=[],n=new Map;for(const e of r){const r=e+"";n.has(r)||n.set(r,t.push(e))}return u},u.range=function(n){return arguments.length?(r=Array.from(n),u):r.slice()},u.unknown=function(n){return arguments.length?(e=n,u):e},u.copy=function(){return T(t,r).unknown(e)},L.apply(u,arguments),u}function B(){var t,r,e=T().unknown(void 0),u=e.domain,a=e.range,o=0,i=1,c=!1,f=0,l=0,s=.5;function h(){var e=u().length,h=i<o,p=h?i:o,g=h?o:i;t=(g-p)/Math.max(1,e-f+2*l),c&&(t=Math.floor(t)),p+=(g-p-t*(e-f))*s,r=t*(1-f),c&&(p=Math.round(p),r=Math.round(r));var m=n(e).map((function(n){return p+t*n}));return a(h?m.reverse():m)}return delete e.unknown,e.domain=function(n){return arguments.length?(u(n),h()):u()},e.range=function(n){return arguments.length?([o,i]=n,o=+o,i=+i,h()):[o,i]},e.rangeRound=function(n){return[o,i]=n,o=+o,i=+i,c=!0,h()},e.bandwidth=function(){return r},e.step=function(){return t},e.round=function(n){return arguments.length?(c=!!n,h()):c},e.padding=function(n){return arguments.length?(f=Math.min(1,l=+n),h()):f},e.paddingInner=function(n){return arguments.length?(f=Math.min(1,n),h()):f},e.paddingOuter=function(n){return arguments.length?(l=+n,h()):l},e.align=function(n){return arguments.length?(s=Math.max(0,Math.min(1,n)),h()):s},e.copy=function(){return B(u(),[o,i]).round(c).paddingInner(f).paddingOuter(l).align(s)},L.apply(h(),arguments)}function Q(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return Q(t())},n}function U(){return Q(B.apply(null,arguments).paddingInner(1))}function C(n){return+n}var W=[0,1];function z(n){return n}function Y(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function G(n,t,r){var e=n[0],u=n[1],a=t[0],o=t[1];return u<e?(e=Y(u,e),a=r(o,a)):(e=Y(e,u),a=r(a,o)),function(n){return a(e(n))}}function H(n,r,e){var u=Math.min(n.length,r.length)-1,a=new Array(u),o=new Array(u),i=-1;for(n[u]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++i<u;)a[i]=Y(n[i],n[i+1]),o[i]=e(r[i],r[i+1]);return function(r){var e=t(n,r,1,u)-1;return o[e](a[e](r))}}function J(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function K(){var n,t,r,e,u,a,o=W,i=W,c=O,f=z;function l(){var n,t,r,c=Math.min(o.length,i.length);return f!==z&&(n=o[0],t=o[c-1],n>t&&(r=n,n=t,t=r),f=function(r){return Math.max(n,Math.min(t,r))}),e=c>2?H:G,u=a=null,s}function s(t){return isNaN(t=+t)?r:(u||(u=e(o.map(n),i,c)))(n(f(t)))}return s.invert=function(r){return f(t((a||(a=e(i,o.map(n),R)))(r)))},s.domain=function(n){return arguments.length?(o=Array.from(n,C),l()):o.slice()},s.range=function(n){return arguments.length?(i=Array.from(n),l()):i.slice()},s.rangeRound=function(n){return i=Array.from(n),c=j,l()},s.clamp=function(n){return arguments.length?(f=!!n||z,l()):f!==z},s.interpolate=function(n){return arguments.length?(c=n,l()):c},s.unknown=function(n){return arguments.length?(r=n,s):r},function(r,e){return n=r,t=e,l()}}function V(){return K()(z,z)}function X(n,t,e,u){var a,o=r(n,t,e);switch((u=c(null==u?",f":u)).type){case"s":var i=Math.max(Math.abs(n),Math.abs(t));return null!=u.precision||isNaN(a=s(o,i))||(u.precision=a),h(u,i);case"":case"e":case"g":case"p":case"r":null!=u.precision||isNaN(a=l(o,Math.max(Math.abs(n),Math.abs(t))))||(u.precision=a-("e"===u.type));break;case"f":case"%":null!=u.precision||isNaN(a=f(o))||(u.precision=a-2*("%"===u.type))}return p(u)}function Z(n){var t=n.domain;return n.ticks=function(n){var r=t();return e(r[0],r[r.length-1],null==n?10:n)},n.tickFormat=function(n,r){var e=t();return X(e[0],e[e.length-1],null==n?10:n,r)},n.nice=function(r){null==r&&(r=10);var e,a=t(),o=0,i=a.length-1,c=a[o],f=a[i];return f<c&&(e=c,c=f,f=e,e=o,o=i,i=e),(e=u(c,f,r))>0?(c=Math.floor(c/e)*e,f=Math.ceil(f/e)*e,e=u(c,f,r)):e<0&&(c=Math.ceil(c*e)/e,f=Math.floor(f*e)/e,e=u(c,f,r)),e>0?(a[o]=Math.floor(c/e)*e,a[i]=Math.ceil(f/e)*e,t(a)):e<0&&(a[o]=Math.ceil(c*e)/e,a[i]=Math.floor(f*e)/e,t(a)),n},n}function $(){var n=V();return n.copy=function(){return J(n,$())},L.apply(n,arguments),Z(n)}function _(n){var t;function r(n){return isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(n=Array.from(t,C),r):n.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return _(n).unknown(t)},n=arguments.length?Array.from(n,C):[0,1],Z(r)}function nn(n,t){var r,e=0,u=(n=n.slice()).length-1,a=n[e],o=n[u];return o<a&&(r=e,e=u,u=r,r=a,a=o,o=r),n[e]=t.floor(a),n[u]=t.ceil(o),n}function tn(n){return Math.log(n)}function rn(n){return Math.exp(n)}function en(n){return-Math.log(-n)}function un(n){return-Math.exp(-n)}function an(n){return isFinite(n)?+("1e"+n):n<0?0:n}function on(n){return function(t){return-n(-t)}}function cn(n){var t,r,u=n(tn,rn),a=u.domain,o=10;function i(){return t=function(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}(o),r=function(n){return 10===n?an:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}(o),a()[0]<0?(t=on(t),r=on(r),n(en,un)):n(tn,rn),u}return u.base=function(n){return arguments.length?(o=+n,i()):o},u.domain=function(n){return arguments.length?(a(n),i()):a()},u.ticks=function(n){var u,i=a(),c=i[0],f=i[i.length-1];(u=f<c)&&(p=c,c=f,f=p);var l,s,h,p=t(c),g=t(f),m=null==n?10:+n,d=[];if(!(o%1)&&g-p<m){if(p=Math.floor(p),g=Math.ceil(g),c>0){for(;p<=g;++p)for(s=1,l=r(p);s<o;++s)if(!((h=l*s)<c)){if(h>f)break;d.push(h)}}else for(;p<=g;++p)for(s=o-1,l=r(p);s>=1;--s)if(!((h=l*s)<c)){if(h>f)break;d.push(h)}2*d.length<m&&(d=e(c,f,m))}else d=e(p,g,Math.min(g-p,m)).map(r);return u?d.reverse():d},u.tickFormat=function(n,e){if(null==e&&(e=10===o?".0e":","),"function"!=typeof e&&(e=p(e)),n===1/0)return e;null==n&&(n=10);var a=Math.max(1,o*n/u.ticks().length);return function(n){var u=n/r(Math.round(t(n)));return u*o<o-.5&&(u*=o),u<=a?e(n):""}},u.nice=function(){return a(nn(a(),{floor:function(n){return r(Math.floor(t(n)))},ceil:function(n){return r(Math.ceil(t(n)))}}))},u}function fn(){var n=cn(K()).domain([1,10]);return n.copy=function(){return J(n,fn()).base(n.base())},L.apply(n,arguments),n}function ln(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function sn(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function hn(n){var t=1,r=n(ln(t),sn(t));return r.constant=function(r){return arguments.length?n(ln(t=+r),sn(t)):t},Z(r)}function pn(){var n=hn(K());return n.copy=function(){return J(n,pn()).constant(n.constant())},L.apply(n,arguments)}function gn(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function mn(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function dn(n){return n<0?-n*n:n*n}function vn(n){var t=n(z,z),r=1;function e(){return 1===r?n(z,z):.5===r?n(mn,dn):n(gn(r),gn(1/r))}return t.exponent=function(n){return arguments.length?(r=+n,e()):r},Z(t)}function yn(){var n=vn(K());return n.copy=function(){return J(n,yn()).exponent(n.exponent())},L.apply(n,arguments),n}function Mn(){return yn.apply(null,arguments).exponent(.5)}function wn(n){return Math.sign(n)*n*n}function kn(n){return Math.sign(n)*Math.sqrt(Math.abs(n))}function Nn(){var n,t=V(),r=[0,1],e=!1;function u(r){var u=kn(t(r));return isNaN(u)?n:e?Math.round(u):u}return u.invert=function(n){return t.invert(wn(n))},u.domain=function(n){return arguments.length?(t.domain(n),u):t.domain()},u.range=function(n){return arguments.length?(t.range((r=Array.from(n,C)).map(wn)),u):r.slice()},u.rangeRound=function(n){return u.range(n).round(!0)},u.round=function(n){return arguments.length?(e=!!n,u):e},u.clamp=function(n){return arguments.length?(t.clamp(n),u):t.clamp()},u.unknown=function(t){return arguments.length?(n=t,u):n},u.copy=function(){return Nn(t.domain(),r).round(e).clamp(t.clamp()).unknown(n)},L.apply(u,arguments),Z(u)}function xn(){var n,r=[],e=[],u=[];function i(){var n=0,t=Math.max(1,e.length);for(u=new Array(t-1);++n<t;)u[n-1]=o(r,n/t);return c}function c(r){return isNaN(r=+r)?n:e[t(u,r)]}return c.invertExtent=function(n){var t=e.indexOf(n);return t<0?[NaN,NaN]:[t>0?u[t-1]:r[0],t<u.length?u[t]:r[r.length-1]]},c.domain=function(n){if(!arguments.length)return r.slice();r=[];for(let t of n)null==t||isNaN(t=+t)||r.push(t);return r.sort(a),i()},c.range=function(n){return arguments.length?(e=Array.from(n),i()):e.slice()},c.unknown=function(t){return arguments.length?(n=t,c):n},c.quantiles=function(){return u.slice()},c.copy=function(){return xn().domain(r).range(e).unknown(n)},L.apply(c,arguments)}function bn(){var n,r=0,e=1,u=1,a=[.5],o=[0,1];function i(r){return r<=r?o[t(a,r,0,u)]:n}function c(){var n=-1;for(a=new Array(u);++n<u;)a[n]=((n+1)*e-(n-u)*r)/(u+1);return i}return i.domain=function(n){return arguments.length?([r,e]=n,r=+r,e=+e,c()):[r,e]},i.range=function(n){return arguments.length?(u=(o=Array.from(n)).length-1,c()):o.slice()},i.invertExtent=function(n){var t=o.indexOf(n);return t<0?[NaN,NaN]:t<1?[r,a[0]]:t>=u?[a[u-1],e]:[a[t-1],a[t]]},i.unknown=function(t){return arguments.length?(n=t,i):i},i.thresholds=function(){return a.slice()},i.copy=function(){return bn().domain([r,e]).range(o).unknown(n)},L.apply(Z(i),arguments)}function An(){var n,r=[.5],e=[0,1],u=1;function a(a){return a<=a?e[t(r,a,0,u)]:n}return a.domain=function(n){return arguments.length?(r=Array.from(n),u=Math.min(r.length,e.length-1),a):r.slice()},a.range=function(n){return arguments.length?(e=Array.from(n),u=Math.min(r.length,e.length-1),a):e.slice()},a.invertExtent=function(n){var t=e.indexOf(n);return[r[t-1],r[t]]},a.unknown=function(t){return arguments.length?(n=t,a):n},a.copy=function(){return An().domain(r).range(e).unknown(n)},L.apply(a,arguments)}function qn(n){return new Date(n)}function Sn(n){return n instanceof Date?+n:+new Date(+n)}function Dn(n,t,e,u,a,o,c,f,l){var s=V(),h=s.invert,p=s.domain,g=l(".%L"),m=l(":%S"),d=l("%I:%M"),v=l("%I %p"),y=l("%a %d"),M=l("%b %d"),w=l("%B"),k=l("%Y"),N=[[c,1,1e3],[c,5,5e3],[c,15,15e3],[c,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,36e5],[a,3,108e5],[a,6,216e5],[a,12,432e5],[u,1,864e5],[u,2,1728e5],[e,1,6048e5],[t,1,2592e6],[t,3,7776e6],[n,1,31536e6]];function x(r){return(c(r)<r?g:o(r)<r?m:a(r)<r?d:u(r)<r?v:t(r)<r?e(r)<r?y:M:n(r)<r?w:k)(r)}function b(t,e,u){if(null==t&&(t=10),"number"==typeof t){var a,o=Math.abs(u-e)/t,c=i((function(n){return n[2]})).right(N,o);return c===N.length?(a=r(e/31536e6,u/31536e6,t),t=n):c?(a=(c=N[o/N[c-1][2]<N[c][2]/o?c-1:c])[1],t=c[0]):(a=Math.max(r(e,u,t),1),t=f),t.every(a)}return t}return s.invert=function(n){return new Date(h(n))},s.domain=function(n){return arguments.length?p(Array.from(n,Sn)):p().map(qn)},s.ticks=function(n){var t,r=p(),e=r[0],u=r[r.length-1],a=u<e;return a&&(t=e,e=u,u=t),t=(t=b(n,e,u))?t.range(e,u+1):[],a?t.reverse():t},s.tickFormat=function(n,t){return null==t?x:l(t)},s.nice=function(n){var t=p();return(n=b(n,t[0],t[t.length-1]))?p(nn(t,n)):s},s.copy=function(){return J(s,Dn(n,t,e,u,a,o,c,f,l))},s}function In(){return L.apply(Dn(k,w,M,y,v,d,m,g,D).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function On(){return L.apply(Dn(S,q,A,b,x,N,m,g,I).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Rn(){var n,t,r,e,u,a=0,o=1,i=z,c=!1;function f(t){return isNaN(t=+t)?u:i(0===r?.5:(t=(e(t)-n)*r,c?Math.max(0,Math.min(1,t)):t))}function l(n){return function(t){var r,e;return arguments.length?([r,e]=t,i=n(r,e),f):[i(0),i(1)]}}return f.domain=function(u){return arguments.length?([a,o]=u,n=e(a=+a),t=e(o=+o),r=n===t?0:1/(t-n),f):[a,o]},f.clamp=function(n){return arguments.length?(c=!!n,f):c},f.interpolator=function(n){return arguments.length?(i=n,f):i},f.range=l(O),f.rangeRound=l(j),f.unknown=function(n){return arguments.length?(u=n,f):u},function(u){return e=u,n=u(a),t=u(o),r=n===t?0:1/(t-n),f}}function jn(n,t){return t.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function En(){var n=Z(Rn()(z));return n.copy=function(){return jn(n,En())},F.apply(n,arguments)}function Ln(){var n=cn(Rn()).domain([1,10]);return n.copy=function(){return jn(n,Ln()).base(n.base())},F.apply(n,arguments)}function Fn(){var n=hn(Rn());return n.copy=function(){return jn(n,Fn()).constant(n.constant())},F.apply(n,arguments)}function Pn(){var n=vn(Rn());return n.copy=function(){return jn(n,Pn()).exponent(n.exponent())},F.apply(n,arguments)}function Tn(){return Pn.apply(null,arguments).exponent(.5)}function Bn(){var n=[],r=z;function e(e){if(!isNaN(e=+e))return r((t(n,e,1)-1)/(n.length-1))}return e.domain=function(t){if(!arguments.length)return n.slice();n=[];for(let r of t)null==r||isNaN(r=+r)||n.push(r);return n.sort(a),e},e.interpolator=function(n){return arguments.length?(r=n,e):r},e.range=function(){return n.map((t,e)=>r(e/(n.length-1)))},e.quantiles=function(t){return Array.from({length:t+1},(r,e)=>o(n,e/t))},e.copy=function(){return Bn(r).domain(n)},F.apply(e,arguments)}function Qn(){var n,t,r,e,u,a,o,i=0,c=.5,f=1,l=1,s=z,h=!1;function p(n){return isNaN(n=+n)?o:(n=.5+((n=+a(n))-t)*(l*n<l*t?e:u),s(h?Math.max(0,Math.min(1,n)):n))}function g(n){return function(t){var r,e,u;return arguments.length?([r,e,u]=t,s=E(n,[r,e,u]),p):[s(0),s(.5),s(1)]}}return p.domain=function(o){return arguments.length?([i,c,f]=o,n=a(i=+i),t=a(c=+c),r=a(f=+f),e=n===t?0:.5/(t-n),u=t===r?0:.5/(r-t),l=t<n?-1:1,p):[i,c,f]},p.clamp=function(n){return arguments.length?(h=!!n,p):h},p.interpolator=function(n){return arguments.length?(s=n,p):s},p.range=g(O),p.rangeRound=g(j),p.unknown=function(n){return arguments.length?(o=n,p):o},function(o){return a=o,n=o(i),t=o(c),r=o(f),e=n===t?0:.5/(t-n),u=t===r?0:.5/(r-t),l=t<n?-1:1,p}}function Un(){var n=Z(Qn()(z));return n.copy=function(){return jn(n,Un())},F.apply(n,arguments)}function Cn(){var n=cn(Qn()).domain([.1,1,10]);return n.copy=function(){return jn(n,Cn()).base(n.base())},F.apply(n,arguments)}function Wn(){var n=hn(Qn());return n.copy=function(){return jn(n,Wn()).constant(n.constant())},F.apply(n,arguments)}function zn(){var n=vn(Qn());return n.copy=function(){return jn(n,zn()).exponent(n.exponent())},F.apply(n,arguments)}function Yn(){return zn.apply(null,arguments).exponent(.5)}export{B as scaleBand,Un as scaleDiverging,Cn as scaleDivergingLog,zn as scaleDivergingPow,Yn as scaleDivergingSqrt,Wn as scaleDivergingSymlog,_ as scaleIdentity,P as scaleImplicit,$ as scaleLinear,fn as scaleLog,T as scaleOrdinal,U as scalePoint,yn as scalePow,xn as scaleQuantile,bn as scaleQuantize,Nn as scaleRadial,En as scaleSequential,Ln as scaleSequentialLog,Pn as scaleSequentialPow,Bn as scaleSequentialQuantile,Tn as scaleSequentialSqrt,Fn as scaleSequentialSymlog,Mn as scaleSqrt,pn as scaleSymlog,An as scaleThreshold,In as scaleTime,On as scaleUtc,X as tickFormat};
//# sourceMappingURL=d3-scale.js.map
