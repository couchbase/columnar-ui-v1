import"../common/index-1efb22b9.js";import{Ng1ViewConfig as e}from"./angularjs.js";import{U as r,b1 as t,d as n,aX as o,f as i}from"../common/index-60357e68.js";import{e as u,f as a,a as p}from"../common/tslib.es6-1ce727b1.js";import"../common/zip-585f594f.js";import"../rxjs.js";import"../rxjs/operators.js";import{Input as s,Component as c,Inject as f,NgModule as g,Injector as m,ElementRef as d}from"../@angular/core.js";import"../@angular/common.js";import"../@angular/platform-browser.js";import{UpgradeModule as v,downgradeComponent as l,getAngularJSGlobal as w,getAngularLib as y}from"../@angular/upgrade/static.js";import{UIRouterRx as $}from"./rx.js";import{UIView as j,UIROUTER_MODULE_TOKEN as b,applyModuleConfig as R,UIRouterModule as E,UIROUTER_ROOT_MODULE as P,ng2LazyLoadBuilder as h,Ng2ViewConfig as x,makeChildProviders as N,_UIROUTER_SERVICE_PROVIDERS as C}from"./angular.js";var T=(w||y)();if(!T)throw new Error("AngularJS not found on window.  https://github.com/ui-router/angular-hybrid/wiki/AngularJS-not-found-on-window");var _=T.module("ui.router.upgrade",["ui.router"]);function F(){return{}}var V=function(){function e(e,r,t){var n=T.element(e.nativeElement).parent().parent();Object.defineProperty(r,"context",{get:function(){var e=n.inheritedData("$uiView");return e&&e.$cfg?e.$cfg.viewDecl.$context:t.root()},enumerable:!0}),Object.defineProperty(r,"fqn",{get:function(){var e=n.inheritedData("$uiView");return e&&e.$uiView?e.$uiView.fqn:null},enumerable:!0})}return e.ctorParameters=function(){return[{type:d},{type:void 0,decorators:[{type:f,args:[j.PARENT_INJECT]}]},{type:t}]},u([s()],e.prototype,"name",void 0),e=u([c({selector:"ui-view-ng-upgrade",template:'\n    <ui-view [name]="name"></ui-view>\n  ',viewProviders:[{provide:j.PARENT_INJECT,useFactory:F}]}),a(1,f(j.PARENT_INJECT))],e)}();function A(e,r){return r.get(b,[]).forEach((function(t){return R(e,r,t)})),e}function J(e){return e.get("$uiRouter")}function I(e){return{fqn:null,context:e.root()}}var D={},O=function(){function e(){}var n;return n=e,e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:n,providers:N(e)}},e.forChild=function(e){return void 0===e&&(e={}),{ngModule:E,providers:N(e)}},e=n=u([g({imports:[E,v],declarations:[V],providers:p([{provide:"$uiRouter",useFactory:J,deps:["$injector"]},{provide:r,useFactory:A,deps:["$uiRouter",m]},{provide:P,useValue:D,multi:!0},{provide:j.PARENT_INJECT,useFactory:I,deps:[t]}],C),entryComponents:[V],exports:[V,E]})],e)}();_.directive("uiViewNgUpgrade",l({component:V,inputs:["name"]})),_.run(["$injector",function(e){var r=e.get("$uiRouter");r.plugin($);var t={get:function(r,t){var n=e.get("$$angularInjector");return e.has(r)?e.get(r):n.get(r,t)}},i=n.fromData(o,t);r.stateRegistry.root().resolvables.push(i)}]),_.config(["$stateRegistryProvider",function(e){e.decorator("lazyLoad",h)}]),_.config(["$stateRegistryProvider",function(e){e.decorator("views",(function(e,r){var t=r(e);return i(t,(function(e,r){"ng1-to-ng2"!==e.$type&&"function"!=typeof e.component||(e.$type="ng1-to-ng2",e.templateProvider=null,e.template="<ui-view-ng-upgrade name='"+e.$uiViewName+"'></ui-view-ng-upgrade>")})),t}))}]),_.run(["$view","$templateFactory",function(r,t){r._pluginapi._viewConfigFactory("ng2",(function(e,r){return new x(e,r)})),r._pluginapi._viewConfigFactory("ng1-to-ng2",(function(r,n){var o=new e(r,Object.assign({},n,{$type:"ng1"}),t);return[new x(r,Object.assign({},n,{$type:"ng2"})),o]}))}]);export{O as UIRouterUpgradeModule,V as UIViewNgUpgrade,I as getParentUIViewInject,J as getUIRouter,F as objectFactory,A as uiRouterUpgradeFactory,_ as upgradeModule,D as Éµ0};
//# sourceMappingURL=angular-hybrid.js.map
