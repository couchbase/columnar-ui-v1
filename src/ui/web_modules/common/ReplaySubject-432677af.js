import{b as t}from"./tslib.es6-c4a4947b.js";import{S as e,O as i,b as n,n as r,o as s,a as o}from"./mergeMap-bab8a89f.js";import{o as u}from"./filter-e53d1fcb.js";var c,h=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.scheduler=t,n.work=i,n.pending=!1,n}return t(i,e),i.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,n=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(n,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},i.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),setInterval(t.flush.bind(t,this),i)},i.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)},i.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(t,e){var i=!1,n=void 0;try{this.work(t)}catch(t){i=!0,n=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),n},i.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,n=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&i.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},i}(function(e){function i(t,i){return e.call(this)||this}return t(i,e),i.prototype.schedule=function(t,e){return this},i}(e)),l=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return t(i,e),i.prototype.schedule=function(t,i){return void 0===i&&(i=0),i>0?e.prototype.schedule.call(this,t,i):(this.delay=i,this.state=t,this.scheduler.flush(this),this)},i.prototype.execute=function(t,i){return i>0||this.closed?e.prototype.execute.call(this,t,i):this._execute(t,i)},i.prototype.requestAsyncId=function(t,i,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,i,n):t.flush(this)},i}(h),a=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=function(){return Date.now()},t}(),d=function(e){function i(t,n){void 0===n&&(n=a.now);var r=e.call(this,t,(function(){return i.delegate&&i.delegate!==r?i.delegate.now():n()}))||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return t(i,e),i.prototype.schedule=function(t,n,r){return void 0===n&&(n=0),i.delegate&&i.delegate!==this?i.delegate.schedule(t,n,r):e.prototype.schedule.call(this,t,n,r)},i.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},i}(a),f=new(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i}(d))(l),p=new i((function(t){return t.complete()}));function v(t){return t?function(t){return new i((function(e){return t.schedule((function(){return e.complete()}))}))}(t):p}function y(t,e){return new i(e?function(i){return e.schedule(w,0,{error:t,subscriber:i})}:function(e){return e.error(t)})}function w(t){var e=t.error;t.subscriber.error(e)}c||(c={});var b=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){switch(this.kind){case"N":return u(this.value);case"E":return y(this.error);case"C":return v()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function m(t,e){return void 0===e&&(e=0),function(i){return i.lift(new _(t,e))}}var _=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new x(t,this.scheduler,this.delay))},t}(),x=function(e){function i(t,i,n){void 0===n&&(n=0);var r=e.call(this,t)||this;return r.scheduler=i,r.delay=n,r}return t(i,e),i.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},i.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(i.dispatch,this.delay,new I(t,this.destination)))},i.prototype._next=function(t){this.scheduleMessage(b.createNext(t))},i.prototype._error=function(t){this.scheduleMessage(b.createError(t)),this.unsubscribe()},i.prototype._complete=function(){this.scheduleMessage(b.createComplete()),this.unsubscribe()},i}(n),I=function(){return function(t,e){this.notification=t,this.destination=e}}(),N=function(i){function n(t,e,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY);var r=i.call(this)||this;return r.scheduler=n,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=t<1?1:t,r._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return t(n,i),n.prototype.nextInfiniteTimeWindow=function(t){var e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),i.prototype.next.call(this,t)},n.prototype.nextTimeWindow=function(t){this._events.push(new g(this._getNow(),t)),this._trimBufferThenGetEvents(),i.prototype.next.call(this,t)},n.prototype._subscribe=function(t){var i,n=this._infiniteTimeWindow,o=n?this._events:this._trimBufferThenGetEvents(),u=this.scheduler,c=o.length;if(this.closed)throw new r;if(this.isStopped||this.hasError?i=e.EMPTY:(this.observers.push(t),i=new s(this,t)),u&&t.add(t=new x(t,u)),n)for(var h=0;h<c&&!t.closed;h++)t.next(o[h]);else for(h=0;h<c&&!t.closed;h++)t.next(o[h].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),i},n.prototype._getNow=function(){return(this.scheduler||f).now()},n.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,i=this._windowTime,n=this._events,r=n.length,s=0;s<r&&!(t-n[s].time<i);)s++;return r>e&&(s=Math.max(s,r-e)),s>0&&n.splice(0,s),n},n}(o),g=function(){return function(t,e){this.time=t,this.value=e}}();export{h as A,p as E,b as N,N as R,a as S,d as a,c as b,v as e,m as o,f as q,y as t};
//# sourceMappingURL=ReplaySubject-432677af.js.map
