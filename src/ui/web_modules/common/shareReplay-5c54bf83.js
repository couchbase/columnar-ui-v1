import{b as t}from"./tslib.es6-c4a4947b.js";import{b as n,i as r}from"./mergeMap-64c6f393.js";import{R as e}from"./ReplaySubject-8316d9c1.js";import{f as i}from"./filter-d76a729c.js";import{E as o}from"./EmptyError-a9e17542.js";import{t as u}from"./take-7bfdafe5.js";function s(t){return void 0===t&&(t=null),function(n){return n.lift(new c(t))}}var c=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,n){return n.subscribe(new f(t,this.defaultValue))},t}(),f=function(n){function r(t,r){var e=n.call(this,t)||this;return e.defaultValue=r,e.isEmpty=!0,e}return t(r,n),r.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},r.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},r}(n);function a(t){return void 0===t&&(t=h),function(n){return n.lift(new l(t))}}var l=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,n){return n.subscribe(new p(t,this.errorFactory))},t}(),p=function(n){function r(t,r){var e=n.call(this,t)||this;return e.errorFactory=r,e.hasValue=!1,e}return t(r,n),r.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},r.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)},r}(n);function h(){return new o}function d(t,n){var e=arguments.length>=2;return function(c){return c.pipe(t?i((function(n,r){return t(n,r,c)})):r,u(1),e?s(n):a((function(){return new o})))}}function m(t,n,r){var i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:n,refCount:!1,scheduler:r},function(t){return t.lift(function(t){var n,r,i=t.bufferSize,o=void 0===i?Number.POSITIVE_INFINITY:i,u=t.windowTime,s=void 0===u?Number.POSITIVE_INFINITY:u,c=t.refCount,f=t.scheduler,a=0,l=!1,p=!1;return function(t){a++,n&&!l||(l=!1,n=new e(o,s,f),r=t.subscribe({next:function(t){n.next(t)},error:function(t){l=!0,n.error(t)},complete:function(){p=!0,n.complete()}}));var i=n.subscribe(this);this.add((function(){a--,i.unsubscribe(),r&&!p&&c&&0===a&&(r.unsubscribe(),r=void 0,n=void 0)}))}}(i))}}export{s as d,d as f,m as s,a as t};
//# sourceMappingURL=shareReplay-5c54bf83.js.map
