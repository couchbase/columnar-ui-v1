{"version":3,"file":"forkJoin-269e2e92.js","sources":["../../node_modules/rxjs/_esm5/internal/observable/forkJoin.js"],"sourcesContent":["/** PURE_IMPORTS_START _Observable,_util_isArray,_operators_map,_util_isObject,_from PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { map } from '../operators/map';\nimport { isObject } from '../util/isObject';\nimport { from } from './from';\nexport function forkJoin() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    if (sources.length === 1) {\n        var first_1 = sources[0];\n        if (isArray(first_1)) {\n            return forkJoinInternal(first_1, null);\n        }\n        if (isObject(first_1) && Object.getPrototypeOf(first_1) === Object.prototype) {\n            var keys = Object.keys(first_1);\n            return forkJoinInternal(keys.map(function (key) { return first_1[key]; }), keys);\n        }\n    }\n    if (typeof sources[sources.length - 1] === 'function') {\n        var resultSelector_1 = sources.pop();\n        sources = (sources.length === 1 && isArray(sources[0])) ? sources[0] : sources;\n        return forkJoinInternal(sources, null).pipe(map(function (args) { return resultSelector_1.apply(void 0, args); }));\n    }\n    return forkJoinInternal(sources, null);\n}\nfunction forkJoinInternal(sources, keys) {\n    return new Observable(function (subscriber) {\n        var len = sources.length;\n        if (len === 0) {\n            subscriber.complete();\n            return;\n        }\n        var values = new Array(len);\n        var completed = 0;\n        var emitted = 0;\n        var _loop_1 = function (i) {\n            var source = from(sources[i]);\n            var hasValue = false;\n            subscriber.add(source.subscribe({\n                next: function (value) {\n                    if (!hasValue) {\n                        hasValue = true;\n                        emitted++;\n                    }\n                    values[i] = value;\n                },\n                error: function (err) { return subscriber.error(err); },\n                complete: function () {\n                    completed++;\n                    if (completed === len || !hasValue) {\n                        if (emitted === len) {\n                            subscriber.next(keys ?\n                                keys.reduce(function (result, key, i) { return (result[key] = values[i], result); }, {}) :\n                                values);\n                        }\n                        subscriber.complete();\n                    }\n                }\n            }));\n        };\n        for (var i = 0; i < len; i++) {\n            _loop_1(i);\n        }\n    });\n}\n//# sourceMappingURL=forkJoin.js.map\n"],"names":["forkJoin","sources","_i","arguments","length","first_1","isArray","forkJoinInternal","isObject","Object","getPrototypeOf","prototype","keys","map","key","resultSelector_1","pop","pipe","args","apply","Observable","subscriber","len","values","Array","completed","emitted","_loop_1","i","source","from","hasValue","add","subscribe","next","value","error","err","complete","reduce","result"],"mappings":"uEAMO,SAASA,IAEZ,IADA,IAAIC,EAAU,GACLC,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,IACpCD,EAAQC,GAAMC,UAAUD,GAE5B,GAAuB,IAAnBD,EAAQG,OAAc,CACtB,IAAIC,EAAUJ,EAAQ,GACtB,GAAIK,EAAQD,GACR,OAAOE,EAAiBF,EAAS,MAErC,GAAIG,EAASH,IAAYI,OAAOC,eAAeL,KAAaI,OAAOE,UAAW,CAC1E,IAAIC,EAAOH,OAAOG,KAAKP,GACvB,OAAOE,EAAiBK,EAAKC,KAAI,SAAUC,GAAO,OAAOT,EAAQS,MAAUF,IAGnF,GAA2C,mBAAhCX,EAAQA,EAAQG,OAAS,GAAmB,CACnD,IAAIW,EAAmBd,EAAQe,MAE/B,OAAOT,EADPN,EAA8B,IAAnBA,EAAQG,QAAgBE,EAAQL,EAAQ,IAAOA,EAAQ,GAAKA,EACtC,MAAMgB,KAAKJ,GAAI,SAAUK,GAAQ,OAAOH,EAAiBI,WAAM,EAAQD,OAE5G,OAAOX,EAAiBN,EAAS,MAErC,SAASM,EAAiBN,EAASW,GAC/B,OAAO,IAAIQ,GAAW,SAAUC,GAC5B,IAAIC,EAAMrB,EAAQG,OAClB,GAAY,IAARkB,EAgCJ,IA5BA,IAAIC,EAAS,IAAIC,MAAMF,GACnBG,EAAY,EACZC,EAAU,EACVC,EAAU,SAAUC,GACpB,IAAIC,EAASC,EAAK7B,EAAQ2B,IACtBG,GAAW,EACfV,EAAWW,IAAIH,EAAOI,UAAU,CAC5BC,KAAM,SAAUC,GACPJ,IACDA,GAAW,EACXL,KAEJH,EAAOK,GAAKO,GAEhBC,MAAO,SAAUC,GAAO,OAAOhB,EAAWe,MAAMC,IAChDC,SAAU,aACNb,IACkBH,GAAQS,IAClBL,IAAYJ,GACZD,EAAWa,KAAKtB,EACZA,EAAK2B,QAAO,SAAUC,EAAQ1B,EAAKc,GAAK,OAAQY,EAAO1B,GAAOS,EAAOK,GAAIY,IAAY,IACrFjB,GAERF,EAAWiB,iBAKlBV,EAAI,EAAGA,EAAIN,EAAKM,IACrBD,EAAQC,QAhCRP,EAAWiB"}