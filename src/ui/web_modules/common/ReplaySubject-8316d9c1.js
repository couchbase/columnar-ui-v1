import{b as t}from"./tslib.es6-c4a4947b.js";import{b as e,k as i,q as n,a as s,S as r}from"./mergeMap-64c6f393.js";import{a as o,A as u,N as h}from"./Notification-9e07e457.js";var c=function(e){function i(t,i){var n=e.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return t(i,e),i.prototype.schedule=function(t,i){return void 0===i&&(i=0),i>0?e.prototype.schedule.call(this,t,i):(this.delay=i,this.state=t,this.scheduler.flush(this),this)},i.prototype.execute=function(t,i){return i>0||this.closed?e.prototype.execute.call(this,t,i):this._execute(t,i)},i.prototype.requestAsyncId=function(t,i,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,i,n):t.flush(this)},i}(o),a=new(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return t(i,e),i}(u))(c);function l(t,e){return void 0===e&&(e=0),function(i){return i.lift(new f(t,e))}}var f=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.scheduler,this.delay))},t}(),d=function(e){function i(t,i,n){void 0===n&&(n=0);var s=e.call(this,t)||this;return s.scheduler=i,s.delay=n,s}return t(i,e),i.dispatch=function(t){var e=t.notification,i=t.destination;e.observe(i),this.unsubscribe()},i.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(i.dispatch,this.delay,new p(t,this.destination)))},i.prototype._next=function(t){this.scheduleMessage(h.createNext(t))},i.prototype._error=function(t){this.scheduleMessage(h.createError(t)),this.unsubscribe()},i.prototype._complete=function(){this.scheduleMessage(h.createComplete()),this.unsubscribe()},i}(e),p=function(){return function(t,e){this.notification=t,this.destination=e}}(),v=function(e){function s(t,i,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===i&&(i=Number.POSITIVE_INFINITY);var s=e.call(this)||this;return s.scheduler=n,s._events=[],s._infiniteTimeWindow=!1,s._bufferSize=t<1?1:t,s._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(s._infiniteTimeWindow=!0,s.next=s.nextInfiniteTimeWindow):s.next=s.nextTimeWindow,s}return t(s,e),s.prototype.nextInfiniteTimeWindow=function(t){var i=this._events;i.push(t),i.length>this._bufferSize&&i.shift(),e.prototype.next.call(this,t)},s.prototype.nextTimeWindow=function(t){this._events.push(new m(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},s.prototype._subscribe=function(t){var e,s=this._infiniteTimeWindow,o=s?this._events:this._trimBufferThenGetEvents(),u=this.scheduler,h=o.length;if(this.closed)throw new i;if(this.isStopped||this.hasError?e=r.EMPTY:(this.observers.push(t),e=new n(this,t)),u&&t.add(t=new d(t,u)),s)for(var c=0;c<h&&!t.closed;c++)t.next(o[c]);else for(c=0;c<h&&!t.closed;c++)t.next(o[c].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},s.prototype._getNow=function(){return(this.scheduler||a).now()},s.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,i=this._windowTime,n=this._events,s=n.length,r=0;r<s&&!(t-n[r].time<i);)r++;return s>e&&(r=Math.max(r,s-e)),r>0&&n.splice(0,r),n},s}(s),m=function(){return function(t,e){this.time=t,this.value=e}}();export{v as R,l as o,a as q};
//# sourceMappingURL=ReplaySubject-8316d9c1.js.map
