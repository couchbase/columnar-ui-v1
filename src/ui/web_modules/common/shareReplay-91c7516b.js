import{b as t}from"./tslib.es6-c4a4947b.js";import{b as n,i as r}from"./mergeMap-bab8a89f.js";import{e,R as i}from"./ReplaySubject-432677af.js";import{f as o}from"./filter-e53d1fcb.js";import{E as u,A as s}from"./EmptyError-27135b5c.js";function c(t){return void 0===t&&(t=null),function(n){return n.lift(new a(t))}}var a=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,n){return n.subscribe(new f(t,this.defaultValue))},t}(),f=function(n){function r(t,r){var e=n.call(this,t)||this;return e.defaultValue=r,e.isEmpty=!0,e}return t(r,n),r.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},r.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},r}(n);function l(t){return void 0===t&&(t=b),function(n){return n.lift(new h(t))}}var h=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,n){return n.subscribe(new p(t,this.errorFactory))},t}(),p=function(n){function r(t,r){var e=n.call(this,t)||this;return e.errorFactory=r,e.hasValue=!1,e}return t(r,n),r.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},r.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)},r}(n);function b(){return new u}function d(t){return function(n){return 0===t?e():n.lift(new m(t))}}var m=function(){function t(t){if(this.total=t,this.total<0)throw new s}return t.prototype.call=function(t,n){return n.subscribe(new v(t,this.total))},t}(),v=function(n){function r(t,r){var e=n.call(this,t)||this;return e.total=r,e.count=0,e}return t(r,n),r.prototype._next=function(t){var n=this.total,r=++this.count;r<=n&&(this.destination.next(t),r===n&&(this.destination.complete(),this.unsubscribe()))},r}(n);function y(t,n){var e=arguments.length>=2;return function(i){return i.pipe(t?o((function(n,r){return t(n,r,i)})):r,d(1),e?c(n):l((function(){return new u})))}}function w(t,n,r){var e;return e=t&&"object"==typeof t?t:{bufferSize:t,windowTime:n,refCount:!1,scheduler:r},function(t){return t.lift(function(t){var n,r,e=t.bufferSize,o=void 0===e?Number.POSITIVE_INFINITY:e,u=t.windowTime,s=void 0===u?Number.POSITIVE_INFINITY:u,c=t.refCount,a=t.scheduler,f=0,l=!1,h=!1;return function(t){f++,n&&!l||(l=!1,n=new i(o,s,a),r=t.subscribe({next:function(t){n.next(t)},error:function(t){l=!0,n.error(t)},complete:function(){h=!0,n.complete()}}));var e=n.subscribe(this);this.add((function(){f--,e.unsubscribe(),r&&!h&&c&&0===f&&(r.unsubscribe(),r=void 0,n=void 0)}))}}(e))}}export{l as a,c as d,y as f,w as s,d as t};
//# sourceMappingURL=shareReplay-91c7516b.js.map
