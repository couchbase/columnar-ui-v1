import{b as t}from"./tslib.es6-c4a4947b.js";import{S as e,a as r,b as n,O as o,g as i,f as s,h as u,y as c,l as h,n as a}from"./mergeMap-64c6f393.js";import{a as l,A as p,e as f}from"./Notification-9e07e457.js";function d(t,e,r,n){return function(o){return o.lift(new y(t,e,r,n))}}var y=function(){function t(t,e,r,n){this.keySelector=t,this.elementSelector=e,this.durationSelector=r,this.subjectSelector=n}return t.prototype.call=function(t,e){return e.subscribe(new v(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),v=function(e){function n(t,r,n,o,i){var s=e.call(this,t)||this;return s.keySelector=r,s.elementSelector=n,s.durationSelector=o,s.subjectSelector=i,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return t(n,e),n.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},n.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var o,i=n.get(e);if(this.elementSelector)try{o=this.elementSelector(t)}catch(t){this.error(t)}else o=t;if(!i){i=this.subjectSelector?this.subjectSelector():new r,n.set(e,i);var s=new m(e,i,this);if(this.destination.next(s),this.durationSelector){var u=void 0;try{u=this.durationSelector(new m(e,i))}catch(t){return void this.error(t)}this.add(u.subscribe(new b(e,i,this)))}}i.closed||i.next(o)},n.prototype._error=function(t){var e=this.groups;e&&(e.forEach((function(e,r){e.error(t)})),e.clear()),this.destination.error(t)},n.prototype._complete=function(){var t=this.groups;t&&(t.forEach((function(t,e){t.complete()})),t.clear()),this.destination.complete()},n.prototype.removeGroup=function(t){this.groups.delete(t)},n.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},n}(n),b=function(e){function r(t,r,n){var o=e.call(this,r)||this;return o.key=t,o.group=r,o.parent=n,o}return t(r,e),r.prototype._next=function(t){this.complete()},r.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},r}(n),m=function(r){function n(t,e,n){var o=r.call(this)||this;return o.key=t,o.groupSubject=e,o.refCountSubscription=n,o}return t(n,r),n.prototype._subscribe=function(t){var r=new e,n=this.refCountSubscription,o=this.groupSubject;return n&&!n.closed&&r.add(new g(n)),r.add(o.subscribe(t)),r},n}(o),g=function(e){function r(t){var r=e.call(this)||this;return r.parent=t,t.count++,r}return t(r,e),r.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},r}(e),x=function(r){function n(){var t=null!==r&&r.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return t(n,r),n.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),e.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),e.EMPTY):r.prototype._subscribe.call(this,t)},n.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},n.prototype.error=function(t){this.hasCompleted||r.prototype.error.call(this,t)},n.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},n}(r),S=1,w={};var C=function(t){var e=S++;return w[e]=t,Promise.resolve().then((function(){return function(t){var e=w[t];e&&e()}(e)})),e},_=function(t){delete w[t]},j=function(e){function r(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return t(r,e),r.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=C(t.flush.bind(t,null))))},r.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(_(r),t.scheduled=void 0)},r}(l),k=new(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,o=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<o&&(t=r.shift()));if(this.active=!1,e){for(;++n<o&&(t=r.shift());)t.unsubscribe();throw e}},r}(p))(j),E=function(){function t(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return t.prototype=Object.create(Error.prototype),t}();function A(t){return new o((function(e){var r;try{r=t()}catch(t){return void e.error(t)}return(r?i(r):f()).subscribe(e)}))}function I(t,e){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=e,r}function T(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return"function"==typeof r&&t.pop(),s(t,void 0).lift(new N(r))}var N=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new U(t,this.resultSelector))},t}(),U=function(e){function r(t,r,n){void 0===n&&(n=Object.create(null));var o=e.call(this,t)||this;return o.iterators=[],o.active=0,o.resultSelector="function"==typeof r?r:null,o.values=n,o}return t(r,e),r.prototype._next=function(t){var e=this.iterators;u(t)?e.push(new M(t)):"function"==typeof t[c]?e.push(new V(t[c]())):e.push(new R(this.destination,this,t))},r.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var r=0;r<e;r++){var n=t[r];if(n.stillUnsubscribed)this.destination.add(n.subscribe(n,r));else this.active--}}else this.destination.complete()},r.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},r.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,r=this.destination,n=0;n<e;n++){if("function"==typeof(s=t[n]).hasValue&&!s.hasValue())return}var o=!1,i=[];for(n=0;n<e;n++){var s,u=(s=t[n]).next();if(s.hasCompleted()&&(o=!0),u.done)return void r.complete();i.push(u.value)}this.resultSelector?this._tryresultSelector(i):r.next(i),o&&r.complete()},r.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},r}(n),V=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),M=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[c]=function(){return this},t.prototype.next=function(t){var e=this.index++,r=this.array;return e<this.length?{value:r[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),R=function(e){function r(t,r,n){var o=e.call(this,t)||this;return o.parent=r,o.observable=n,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return t(r,e),r.prototype[c]=function(){return this},r.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},r.prototype.hasValue=function(){return this.buffer.length>0},r.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},r.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},r.prototype.notifyNext=function(t,e,r,n,o){this.buffer.push(e),this.parent.checkIterators()},r.prototype.subscribe=function(t,e){return h(this,this.observable,this,e)},r}(a);export{x as A,m as G,E as T,N as Z,k as a,A as d,d as g,I as n,T as z};
//# sourceMappingURL=zip-41358de8.js.map
