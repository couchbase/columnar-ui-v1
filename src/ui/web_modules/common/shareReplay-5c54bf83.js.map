{"version":3,"file":"shareReplay-5c54bf83.js","sources":["../../node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js","../../node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js","../../node_modules/rxjs/_esm5/internal/operators/first.js","../../node_modules/rxjs/_esm5/internal/operators/shareReplay.js"],"sourcesContent":["/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function defaultIfEmpty(defaultValue) {\n    if (defaultValue === void 0) {\n        defaultValue = null;\n    }\n    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };\n}\nvar DefaultIfEmptyOperator = /*@__PURE__*/ (function () {\n    function DefaultIfEmptyOperator(defaultValue) {\n        this.defaultValue = defaultValue;\n    }\n    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n    };\n    return DefaultIfEmptyOperator;\n}());\nvar DefaultIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n//# sourceMappingURL=defaultIfEmpty.js.map\n","/** PURE_IMPORTS_START tslib,_util_EmptyError,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { EmptyError } from '../util/EmptyError';\nimport { Subscriber } from '../Subscriber';\nexport function throwIfEmpty(errorFactory) {\n    if (errorFactory === void 0) {\n        errorFactory = defaultErrorFactory;\n    }\n    return function (source) {\n        return source.lift(new ThrowIfEmptyOperator(errorFactory));\n    };\n}\nvar ThrowIfEmptyOperator = /*@__PURE__*/ (function () {\n    function ThrowIfEmptyOperator(errorFactory) {\n        this.errorFactory = errorFactory;\n    }\n    ThrowIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ThrowIfEmptySubscriber(subscriber, this.errorFactory));\n    };\n    return ThrowIfEmptyOperator;\n}());\nvar ThrowIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ThrowIfEmptySubscriber, _super);\n    function ThrowIfEmptySubscriber(destination, errorFactory) {\n        var _this = _super.call(this, destination) || this;\n        _this.errorFactory = errorFactory;\n        _this.hasValue = false;\n        return _this;\n    }\n    ThrowIfEmptySubscriber.prototype._next = function (value) {\n        this.hasValue = true;\n        this.destination.next(value);\n    };\n    ThrowIfEmptySubscriber.prototype._complete = function () {\n        if (!this.hasValue) {\n            var err = void 0;\n            try {\n                err = this.errorFactory();\n            }\n            catch (e) {\n                err = e;\n            }\n            this.destination.error(err);\n        }\n        else {\n            return this.destination.complete();\n        }\n    };\n    return ThrowIfEmptySubscriber;\n}(Subscriber));\nfunction defaultErrorFactory() {\n    return new EmptyError();\n}\n//# sourceMappingURL=throwIfEmpty.js.map\n","/** PURE_IMPORTS_START _util_EmptyError,_filter,_take,_defaultIfEmpty,_throwIfEmpty,_util_identity PURE_IMPORTS_END */\nimport { EmptyError } from '../util/EmptyError';\nimport { filter } from './filter';\nimport { take } from './take';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { identity } from '../util/identity';\nexport function first(predicate, defaultValue) {\n    var hasDefaultValue = arguments.length >= 2;\n    return function (source) { return source.pipe(predicate ? filter(function (v, i) { return predicate(v, i, source); }) : identity, take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function () { return new EmptyError(); })); };\n}\n//# sourceMappingURL=first.js.map\n","/** PURE_IMPORTS_START _ReplaySubject PURE_IMPORTS_END */\nimport { ReplaySubject } from '../ReplaySubject';\nexport function shareReplay(configOrBufferSize, windowTime, scheduler) {\n    var config;\n    if (configOrBufferSize && typeof configOrBufferSize === 'object') {\n        config = configOrBufferSize;\n    }\n    else {\n        config = {\n            bufferSize: configOrBufferSize,\n            windowTime: windowTime,\n            refCount: false,\n            scheduler: scheduler\n        };\n    }\n    return function (source) { return source.lift(shareReplayOperator(config)); };\n}\nfunction shareReplayOperator(_a) {\n    var _b = _a.bufferSize, bufferSize = _b === void 0 ? Number.POSITIVE_INFINITY : _b, _c = _a.windowTime, windowTime = _c === void 0 ? Number.POSITIVE_INFINITY : _c, useRefCount = _a.refCount, scheduler = _a.scheduler;\n    var subject;\n    var refCount = 0;\n    var subscription;\n    var hasError = false;\n    var isComplete = false;\n    return function shareReplayOperation(source) {\n        refCount++;\n        if (!subject || hasError) {\n            hasError = false;\n            subject = new ReplaySubject(bufferSize, windowTime, scheduler);\n            subscription = source.subscribe({\n                next: function (value) { subject.next(value); },\n                error: function (err) {\n                    hasError = true;\n                    subject.error(err);\n                },\n                complete: function () {\n                    isComplete = true;\n                    subject.complete();\n                },\n            });\n        }\n        var innerSub = subject.subscribe(this);\n        this.add(function () {\n            refCount--;\n            innerSub.unsubscribe();\n            if (subscription && !isComplete && useRefCount && refCount === 0) {\n                subscription.unsubscribe();\n                subscription = undefined;\n                subject = undefined;\n            }\n        });\n    };\n}\n//# sourceMappingURL=shareReplay.js.map\n"],"names":["defaultIfEmpty","defaultValue","source","lift","DefaultIfEmptyOperator","this","prototype","call","subscriber","subscribe","DefaultIfEmptySubscriber","_super","destination","_this","isEmpty","tslib_1.__extends","_next","value","next","_complete","complete","Subscriber","throwIfEmpty","errorFactory","defaultErrorFactory","ThrowIfEmptyOperator","ThrowIfEmptySubscriber","hasValue","err","e","error","EmptyError","first","predicate","hasDefaultValue","arguments","length","pipe","filter","v","i","identity","take","shareReplay","configOrBufferSize","windowTime","scheduler","config","bufferSize","refCount","_a","subject","subscription","_b","Number","POSITIVE_INFINITY","_c","useRefCount","hasError","isComplete","ReplaySubject","innerSub","add","unsubscribe","undefined","shareReplayOperator"],"mappings":"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"}