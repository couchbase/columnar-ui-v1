{"version":3,"file":"d3-collection.js","sources":["../node_modules/d3-collection/src/map.js","../node_modules/d3-collection/src/nest.js","../node_modules/d3-collection/src/set.js","../node_modules/d3-collection/src/keys.js","../node_modules/d3-collection/src/values.js","../node_modules/d3-collection/src/entries.js"],"sourcesContent":["export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume itâ€™s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export default function(map) {\n  var keys = [];\n  for (var key in map) keys.push(key);\n  return keys;\n}\n","export default function(map) {\n  var values = [];\n  for (var key in map) values.push(map[key]);\n  return values;\n}\n","export default function(map) {\n  var entries = [];\n  for (var key in map) entries.push({key: key, value: map[key]});\n  return entries;\n}\n"],"names":["Map","map","object","f","each","value","key","set","Array","isArray","o","i","n","length","sortValues","rollup","nest","keys","sortKeys","apply","array","depth","createResult","setResult","sort","keyValue","values","valuesByKey","result","get","push","createObject","setObject","createMap","setMap","entries","sortKey","v","k","a","b","d","order","Set","prototype","constructor","has","this","remove","property","clear","slice","size","empty","proto","add"],"mappings":"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"}