import"./common/tslib.es6-c4a4947b.js";import{a as t}from"./common/mergeMap-64c6f393.js";import"./common/merge-183efbc7.js";import"./common/share-d41e3509.js";import{InjectionToken as e,Injectable as o,Inject as r,Optional as n,defineInjectable as i,inject as s,Directive as p,Input as c,Output as a,HostListener as u,ViewContainerRef as d,TemplateRef as h,EventEmitter as l,NgModule as y}from"./@angular/core.js";import{DOCUMENT as m,CommonModule as f}from"./@angular/common.js";var g=new e("WindowToken","undefined"!=typeof window&&window.document?{providedIn:"root",factory:function(){return window}}:void 0),b=function(){function e(e,o){this.document=e,this.window=o,this.copySubject=new t,this.copyResponse$=this.copySubject.asObservable(),this.config={}}return e.prototype.configure=function(t){this.config=t},e.prototype.copy=function(t){if(!this.isSupported||!t)return this.pushCopyResponse({isSuccess:!1,content:t});var e=this.copyFromContent(t);return e?this.pushCopyResponse({content:t,isSuccess:e}):this.pushCopyResponse({isSuccess:!1,content:t})},Object.defineProperty(e.prototype,"isSupported",{get:function(){return!!this.document.queryCommandSupported&&!!this.document.queryCommandSupported("copy")&&!!this.window},enumerable:!0,configurable:!0}),e.prototype.isTargetValid=function(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){if(t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');return!0}throw new Error("Target should be input or textarea")},e.prototype.copyFromInputElement=function(t,e){void 0===e&&(e=!0);try{this.selectTarget(t);var o=this.copyText();return this.clearSelection(e?t:void 0,this.window),o&&this.isCopySuccessInIE11()}catch(t){return!1}},e.prototype.isCopySuccessInIE11=function(){var t=this.window.clipboardData;return!(t&&t.getData&&!t.getData("Text"))},e.prototype.copyFromContent=function(t,e){if(void 0===e&&(e=this.document.body),this.tempTextArea&&!e.contains(this.tempTextArea)&&this.destroy(this.tempTextArea.parentElement),!this.tempTextArea){this.tempTextArea=this.createTempTextArea(this.document,this.window);try{e.appendChild(this.tempTextArea)}catch(t){throw new Error("Container should be a Dom element")}}this.tempTextArea.value=t;var o=this.copyFromInputElement(this.tempTextArea,!1);return this.config.cleanUpAfterCopy&&this.destroy(this.tempTextArea.parentElement),o},e.prototype.destroy=function(t){void 0===t&&(t=this.document.body),this.tempTextArea&&(t.removeChild(this.tempTextArea),this.tempTextArea=void 0)},e.prototype.selectTarget=function(t){return t.select(),t.setSelectionRange(0,t.value.length),t.value.length},e.prototype.copyText=function(){return this.document.execCommand("copy")},e.prototype.clearSelection=function(t,e){t&&t.focus(),e.getSelection().removeAllRanges()},e.prototype.createTempTextArea=function(t,e){var o,r="rtl"===t.documentElement.getAttribute("dir");(o=t.createElement("textarea")).style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[r?"right":"left"]="-9999px";var n=e.pageYOffset||t.documentElement.scrollTop;return o.style.top=n+"px",o.setAttribute("readonly",""),o},e.prototype.pushCopyResponse=function(t){this.copySubject.next(t)},e.prototype.pushCopyReponse=function(t){this.pushCopyResponse(t)},e.decorators=[{type:o,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:r,args:[m]}]},{type:void 0,decorators:[{type:n},{type:r,args:[g]}]}]},e.ngInjectableDef=i({factory:function(){return new e(s(m),s(g,8))},token:e,providedIn:"root"}),e}(),v=function(){function t(t){this.clipboardSrv=t,this.cbOnSuccess=new l,this.cbOnError=new l}return t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.clipboardSrv.destroy(this.container)},t.prototype.onClick=function(t){this.clipboardSrv.isSupported?this.targetElm&&this.clipboardSrv.isTargetValid(this.targetElm)?this.handleResult(this.clipboardSrv.copyFromInputElement(this.targetElm),this.targetElm.value,t):this.cbContent&&this.handleResult(this.clipboardSrv.copyFromContent(this.cbContent,this.container),this.cbContent,t):this.handleResult(!1,void 0,t)},t.prototype.handleResult=function(t,e,o){var r={isSuccess:t,event:o};t?(r=Object.assign(r,{content:e,successMessage:this.cbSuccessMsg}),this.cbOnSuccess.emit(r)):this.cbOnError.emit(r),this.clipboardSrv.pushCopyResponse(r)},t.decorators=[{type:p,args:[{selector:"[ngxClipboard]"}]}],t.ctorParameters=function(){return[{type:b}]},t.propDecorators={targetElm:[{type:c,args:["ngxClipboard"]}],container:[{type:c}],cbContent:[{type:c}],cbSuccessMsg:[{type:c}],cbOnSuccess:[{type:a}],cbOnError:[{type:a}],onClick:[{type:u,args:["click",["$event.target"]]}]},t}(),S=function(){function t(t,e,o){this._clipboardService=t,this._viewContainerRef=e,this._templateRef=o}return t.prototype.ngOnInit=function(){this._clipboardService.isSupported&&this._viewContainerRef.createEmbeddedView(this._templateRef)},t.decorators=[{type:p,args:[{selector:"[ngxClipboardIfSupported]"}]}],t.ctorParameters=function(){return[{type:b},{type:d},{type:h}]},t}(),w=function(){function t(){}return t.decorators=[{type:y,args:[{imports:[f],declarations:[v,S],exports:[v,S]}]}],t}();export{v as ClipboardDirective,S as ClipboardIfSupportedDirective,w as ClipboardModule,b as ClipboardService};
//# sourceMappingURL=ngx-clipboard.js.map
