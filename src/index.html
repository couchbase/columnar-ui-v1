<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>NorthScale Console</title>
<link rel="stylesheet" type="text/css" href="/css/screen.css">
<link rel="stylesheet" type="text/css" href="/css/tabs.css">
<script src="/js/all.js"></script>
</head>
<body>
  <div id="container">
    <div id="header">
      <a href="/index.html"><span></span></a>
    </div> <!-- header -->

    <div id="mainContainer">

<table width="100%">
<tr>

      <td class="leftNav">
        <h1>RUN</h1>
        <ul>
          <!--<li class="line"></li>-->
          <li class="line"><a id="switch_overview" href="javascript:nav.go('overview');">Cluster Overview</a></li>
          <li class="line"><a id="switch_analytics" href="javascript:nav.go('analytics');">Analytics</a></li>
          <li class="line"><a id="switch_buckets" href="javascript:nav.go('buckets');">Buckets</a></li>
          <li class="line"><a id="switch_alerts" href="javascript:nav.go('alerts');">Alerts/Logs</a></li>
          <li class="line"><a id="switch_settings" href="javascript:nav.go('settings');">Cluster Settings</a></li>
        </ul>
		<h1>Configure</h1>
		<ul>
			<li>
				<a href="#">Cluster Settings</a>
			</li>
		</ul>
		<!-- test claster -->
		<div class="blue_round_block test_claster">
			<div class="top">
				<div></div>
			</div>
			<div class="content">
				<span class="label">Test Cluster</span>
				<a href="#" class="start">Start</a>
				<div class="right">
					<a href="#">Clear Test Data</a>
				</div>
			</div>
			<div class="bottom">
				<div></div>
			</div>
		</div>
		<!-- End test claster -->
      </td>
<!--
  <div class="notify">
  notification will go here
  </div>
-->

  <td id="mainPanel">

  <div id="overview" style="display:none;">
    <!-- shadow box -->
	<h1>Overview</h1>
	<div class="shadow_box"><div class="top"><div><div></div></div></div><div class="cnt"><div class="pad"><div class="content">
    <h2 class="header_2" id="get_started_expander"><div class="expander_2"></div>Get Started</h2>
    <div class="pad_10" id="get_started">
        Congratulations! You may also want to review our <a>Developer Guide</a> or <a>Getting Started Guide</a> before proceding.
        <div class="pat_10">
            <div class="gray_rb">
                <div class="left">
                    <div class="right">
                        <div class="pad">
                            <a class="button_big">
                                <div>
                                    <div>
                                        Test Server
                                    </div>
                                </div>
                            </a>
                            <a class="button_big">
                                <div>
                                    <div>
                                        Secure Server
                                    </div>
                                </div>
                            </a>
                            <a class="button_big">
                                <div>
                                    <div>
                                        Join Cluster
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div></div></div><div class="bottom"><div><div></div></div></div></div>
	<!-- END shadow box -->
	<!-- shadow box -->
	<h1>Status</h1>
	<div class="shadow_box"><div class="top"><div><div></div></div></div><div class="cnt"><div class="pad"><div class="content">
    <div class="darker_block with_devider">
        <div class="labeled_line">
            <h2 class="label">Cluster Health:</h2>
            <div class="line_cnt">
                <div class="alert_1"></div> <a>Critical</a> <span class="comment">(3 server nodes managing <a>4 buckets</a>)</span>
            </div>
        </div>
        <div class="labeled_line">
            <h2 class="label for_usage_big">Cluster Memory Usage:</h2>
            <div class="line_cnt">
                <div class="usage_big">
                    <div class="unused">
                        <div class="used" style="width:50%;"></div>
                    </div>
                    <div class="comment">50% Utilized (500MB Free)</div>
                </div>
            </div>
        </div>
        <div class="labeled_line">
            <h2 class="label for_usage_big">Cluster Disk Usage:</h2>
            <div class="line_cnt">
                <div class="usage_big red">
                    <div class="unused">
                        <div class="used" style="width:50%;"></div>
                    </div>
                    <div class="comment">50% Utilized (500MB Free)</div>
                </div>
            </div>
        </div>
    </div>
    <div class="section">
      <div class="labeled_line">
          <h2 class="label for_server_line">Server Nodes:</h2>
          <p class="line_cnt" id="server_list_container">
          </p>
          <div id="server_list_template" class="template">
            <table><tbody>
              <!-- {% $.each(rows, function (index) { %} -->
              <!-- {% var runningClass;
                 if (this.running) {
                   runningClass = "up"
                 } else {
                   runningClass = "down"
                 }
              %} -->
              <tr class="primary">
                <td class="expander"><div></div></td>
                <td class="name"><div>{%= h(this.hostname) %}</div></td>
                <td class="status"><div class="{%=runningClass%}"></div></td>
              </tr>
              <tr class="details"><td colspan="3">
                <div class="first gong_rb">
                  <div class="side side_1"></div>
                  <div class="side side_2"></div>
                  <div class="side side_3"></div>
                  <div class="side side_4"></div>
                  <div class="pad">
                      <table>
                        <col width="230" />
                        <col width="" />
                        <tr>
                            <td>Uptime: <span>{%= h(formatUptime(this.uptime)) %}</span></td>
                            <td>
                                <div class="float_left">Memory Usage:</div>
                                <div class="float_left usage_small">
                                    <div class="side_shadow">
                                        <div class="unused">
                                            <div class="used" style="width:50%;"></div>
                                        </div>
                                    </div>
                                </div>
                                <span class="float_left">50% used</span></td>
                        </tr>
                        <tr>
                            <td>OS: <span>{%= h(this.os) %}</span></td>
                            <td>Cache Port: <span>{%=h(this.ports.direct)%}</span></td>
                        </tr>
                        <tr>
                            <td>Version: <span>{%= h(this.version) %}</span></td>
                            <td>Proxy Port: <span>{%=h(this.ports.proxy)%}</span></td>
                        </tr>
                      </table>
                  </div>
                </div>
              </td></tr>
             <!-- {% }); %} -->
            </tbody></table>
          </div>
      </div>
    </div>
	</div></div></div><div class="bottom"><div><div></div></div></div></div>
	<!-- END shadow box -->
  </div>

  <div id="analytics" style="display:none">
	<h1>
		<div class="nav float_right"><a>Configure View</a></div>
		Analytics: Exerciser App
	</h1>
	<!-- shadow box -->
	<div class="shadow_box"><div class="top"><div><div></div></div></div><div class="cnt"><div class="pad"><div class="content">
    <div class="section">
      <h2 class="header_2">
		<div class="nav float_right">
			<a class="current">1 Hour</a> | <a>24 Hour</a>
		</div>
	  System overview: <span><a id='analytics_graph_zoom_real_time'>Live View</a>
      </span>
	  </h2>
      <p class="analytics_graph_main">
		<span class="graph_info_label block right">3 active nodes last collected 5 seconds ago</span>
		<span id="analytics_main_graph"></span>
	  </p>
      <p class="darker_block graph_nav">
		  <span id="analytics_graph_ops"></span>
		  <span id="analytics_graph_gets"></span>
		  <span id="analytics_graph_sets"></span>
		  <span id="analytics_graph_misses"></span>
		  <b class="clear"></b>
      </p>
    </div>
	</div></div></div><div class="bottom"><div><div></div></div></div></div>
	<!-- END shadow box -->
	<h1>Key Values: Exerciser App</h1>
	<!-- shadow box -->
	<div class="shadow_box"><div class="top"><div><div></div></div></div><div class="cnt"><div class="pad"><div class="content">
    <div class="section">
      <h2 class="header_2">
      <!--><span class="stat_target_name"></span> - Top Key Values <span>Interval
      <a id='analytics_keys_zoom_real_time'>Real time</a>
      </span>-->
          <div class="nav float_right">
            <a class="current">1 Hour</a> | <a>24 Hour</a>
          </div>
          Interval Zoom: <span><a id='analytics_graph_zoom_real_time'>Live View</a>
      </h2>
      <p id="top_keys_container">
      </p>
      <div id="top_keys_template" class="template">
        <table>
          <tr><th>Top Key Values
            <th>Type
            <th>Gets
            <th>Misses
            <th>Total
          {% $.each(rows, function () { %}
            <tr><td>{%= h(this.name) %}
                <td>{%= h(this.type) %}
                <td>{%= h(this.gets) %}
                <td>{%= h(this.misses) %}
                <td>{%= h(this.total) %}
          {% }); %}
        </table>
      </div>
    </div>
	</div></div></div><div class="bottom"><div><div></div></div></div></div>
	<!-- END shadow box -->
  </div>

  <div id="buckets" style="display:none">
    <!-- shadow box -->
    <h1>Buckets</h1>
    <div class="shadow_box"><div class="top"><div><div></div></div></div><div class="cnt"><div class="pad"><div class="content">
    <div class="darker_block">
        <div class="pad_10">
            <div class="pat_10 right">
                <!--<a href="javascript:nav.go('overview')">Cluster Overview</a> &gt; Buckets-->
                <button class="button_medium" onclick="BucketsSection.startCreate();">Add a New Bucket</button>
            </div>
        </div>
    </div>
    <div id="bucket_list_container">
    </div>
    </div></div></div><div class="bottom"><div><div></div></div></div></div>
	<!-- END shadow box -->
    <div class="right text_11 mt-20 pas_10">
        <a href="#">Next Page &gt;&gt;</a>
    </div>
    <div id="bucket_list_template" class="template">
        <table class="lined_tab">
          <col width="" />
          <col width="" />
          <col width="" />
          <col width="135" />
          <col width="" />
          <tr>
            <th>Name</th>
            <th>Ops/Sec</th>
            <th>Evictions/Sec</th>
            <th>Cache Used</th>
            <th>Cache Size</th>
          </tr>
          <!-- {% $.each(rows, function () { %} -->
            <tr>
              <td>
              <a class="float_right text_11" href="{%=jsLink('BucketsSection.showBucket',this.uri)%}">Properties</a>
              <a class="gray_link" href="{%=jsLink('AnalyticsSection.visitBucket', this.uri)%}">{%= h(this.name) %}</a></td>
              <td>{%= h(this.basicStats.opsPerSec) %}</td>
              <td>{%= h(this.basicStats.evictionsPerSec) %}</td>
              <td>
                <div class="usage_smallest_info">
                    <div class="usage_smallest">
                        <div class="side_shadow">
                            <div class="unused">
                                <div class="used" style="width:50%;"></div>
                            </div>
                        </div>
                    </div>
                    {%= h(this.basicStats.cachePercentUsed) %}%
                </div>
              </td>
              <td>{%= h(this.basicStats.cacheSize) %}MB</td>
            </tr> <!-- This tr is important. Otherwise browser may close row after end of loop, causing incorrect resultant markup -->
          <!-- {% }); %} -->
        </table>
    </div>
  </div>

  <div id="alerts" style="display:none">
    <ul class="tabs">
      <li><a href="#">Current Alerts</a>
      <li><a href="#">Alert Settings</a>
      <li><a href="#">Log</a>
    </ul>
    <div class="panes">
      <div id="alerts_list">
        <p>Alerts are being sent to: <span id="alerts_email_setting"></span><a href='javascript:AlertsSection.changeEmail(),void(0);'>Change this</a></p>
        <ol id="alert_list_container">
        </ol>
        <ol id="alert_list_template" class="template">
          <!-- {% _.each(rows, function (alert) { %} -->
          <li class="alert_{%= h(alert.type) %}"><h3>{%= formatAlertType(alert.type) %} - {%= h(alert.shortText) %}</h3>
          <span class="time">{%= h(formatAlertTStamp(alert.tstamp)) %}</span><p>
          {%= h(alert.text) %}
          </p></li>
          <!-- {% }); %} -->
        </ol>
      </div>
      <div>
        <h3>Alert Setting</h3>
        <input type="hidden" id="alerts_settings_form_is_clean" value="1">
        <form id="alerts_settings_form" onsubmit="javascript:return false;">
        <p><label><input type="checkbox" name="sendAlerts" value="1"><input type="hidden" value="0" name="sendAlerts">
        Notify me by email with alerts</label></p>
        <div id="alerts_settings_guts" style="display:none;">
          <p><label>Email Address <input type="text" name="email"></label></p>
          <h4>Alert Types</h4>
          <p>Alert me when:
          <ul>
            <li><label><input type="checkbox" value="1" name="sendForLowSpace"><input type="hidden" value="0" name="sendForLowSpace">
            ... a server is low on disk space.</label>
            <li><label><input type="checkbox" value="1" name="sendForLowMemory"><input type="hidden" value="0" name="sendForLowMemory">
            ... a server is low on available memory.</label>
            <li><label><input type="checkbox" value="1" name="sendForNotResponding"><input type="hidden" value="0" name="sendForNotResponding">
            ... a server is not responding.</label>
            <li><label><input type="checkbox" value="1" name="sendForJoinsCluster"><input type="hidden" value="0" name="sendForJoinsCluster">
            ... a new server joins cluster.</label>
            <li><label><input type="checkbox" value="1" name="sendForOpsAboveNormal"><input type="hidden" value="0" name="sendForOpsAboveNormal">
            ... average daily ops/second is above normal.</label>
            <li><label><input type="checkbox" value="1" name="sendForSetsAboveNormal"><input type="hidden" value="0" name="sendForSetsAboveNormal">
            ... average daily sets/second is above normal.</label>
          </ul>
        </div>
        <p><a href="javascript:AlertsSection.settingsCancel(),void(0);">Cancel</a>
          <button type="submit">Save</button></p>
        </form>
      </div>
      <div>
        <p>Log is here</p>
      </div>
    </div>
  </div><div id="settings" style="display:none">
    This is settings
  </div>

</tr>
</table>

<div class="jqmWindow" id="login_dialog">
  <div>Dev. hint: use <a href="/index.html?noauth&ajaxDelay=350">noauth</a> version</div>
<form id="login_form">
  <label>Login:<input name="login"></label>
  <label>Password:<input name="password"></label>
  <input type="submit">
</form>
<script>
  $('#login_form').bind('submit', function (e) {
    e.preventDefault();
    loginFormSubmit();
  });
</script>
</div>
<div class="jqmWindow" id="bucket_details_dialog_container">
</div>
<div id="bucket_details_dialog_template" class="template">
<a href="#" class="jqmClose">Close</a>
<hr>
<p>Bucket properties for {%= h(b.name) %}</p>
<p>Bucket name: {%= h(b.name) %}</p>
<p>Cache size: {%= h(b.basicStats.cacheSize) %} MB <button type="button" onclick="{%=jsLink('BucketsSection.startFlushCache', b.uri)%}">Flush All</button></p>
<p>Password: ***** <a href="javascript:BucketsSection.startPasswordChange()">Change Password</a></p>
<p>Sample connection string: <textarea rows="3" readonly>sample connection string here</textarea></p>
</div>
<div class="jqmWindow" id="add_new_bucket_dialog">
  <h1>Add New Bucket</h1>
  <div id="add_new_bucket_errors_container"></div>
  <div id="add_new_bucket_errors_template" class="template">
    Couldn't create bucket due to:
    <ul>
      <!-- {% _.each(rows, function (e) { %} -->
      <li>{%= h(e) %}
      <!-- {% }); %} -->
    </ul>
  </div>

  <form id="add_new_bucket_form">
  <p><label>Bucket Name<input type="text" name="name"></label>
  <p><label>Cache Size<input type="text" name="cacheSize"><span class="cache-details"></span></label>
  <p><label><input type="checkbox" value="1" name="reserveInAdvance">Reserve memory in advance</label>
  <p>Password<input type="password" name="password" autocomplete="off">
  <p>Verify Password<input type="password" name="verifyPassword" autocomplete="off"> <span class="dont-match">Password don't match</span>
  <p><a href="#" class="jqmClose">cancel</a> <button type="submit">Add Bucket</button>
  </form>
</div>
<div class="jqmWindow" id="flush_cache_dialog_container">
</div>
<div class="template" id="flush_cache_dialog_template">
  <h1>Are you sure you want to flush all items in {%=h(bucket.name)%}</h1>
  <table><tr><td>Cache Size<td>{%=h(bucket.basicStats.cacheSize)%}
     [MB x {%=h(DAO.getBucketNodesCount(bucket))%} = {%=h(DAO.getBucketNodesCount(bucket) * bucket.basicStats.cacheSize)%}MB Total Cache]
    <tr><td>Total Items Stored<td>{%=h(bucket.basicStats.totalItemsStored)%}
  </table>
  <p><a href='#' class="jqmClose">cancel</a>
     <button type="button"
     onclick="{%=renderJSLink('BucketsSection.completeFlushCache', bucket.uri, '')%}">Flush</button></p>
</div>
<div class="jqmWindow" id="bucket_password_dialog">
  <h1>Enter new password</h1>
  <form id="bucket_password_form">
  <label>Password: <input type="password" name="password"></label>
  <label>Verify Password: <input type="password" name="verifyPassword"></label>
  <p><a class="jqmClose">Cancel</a><button type="submit">Submit</button></p>
  </form>
</div>

</div> <!-- mainContainer -->

<div id="footer">
  <h1>Copyright 2010 <a href="http://northscale.com">NorthScale, Inc.</a> All rights reserved.</h1>
</div>

</div> <!-- container -->

</body>
</html>
