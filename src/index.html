<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>NorthScale Console</title>
<link rel="stylesheet" type="text/css" href="/css/screen.css">
<link rel="stylesheet" type="text/css" href="/css/tabs.css">
<script src="/js/all.js"></script>
</head>
<body>
  <div id="container">
    <div id="header">
      <a href="/index.html"><span></span></a>
    </div> <!-- header -->

    <div id="mainContainer">

<table width="100%">
<tr>

      <td class="leftNav">
        <h1>RUN</h1>

        <ul>
          <!--<li class="line"></li>-->
          <li class="line"><a id="switch_overview" href="javascript:nav.go('overview');">Cluster Overview</a></li>
          <li class="line"><a id="switch_analytics" href="javascript:nav.go('analytics');">Analytics</a></li>
          <li class="line"><a id="switch_buckets" href="javascript:nav.go('buckets');">Buckets</a></li>
          <li class="line"><a id="switch_alerts" href="javascript:nav.go('alerts');">Alerts/Logs</a></li>
          <li class="line"><a id="switch_settings" href="javascript:nav.go('settings');">Cluster Settings</a></li>
        </ul>
		<!-- test claster -->
		<div class="blue_round_block test_claster">
			<div class="top">
				<div></div>
			</div>
			<div class="content">
				<span class="label">Test Cluster</span>
				<a href="#" class="start">Start</a>
				<div class="right">
					<a href="#">Clear Test Data</a>
				</div>
			</div>
			<div class="bottom">
				<div></div>
			</div>
		</div>
		<!-- End test claster -->
      </td>
<!--
  <div class="notify">
  notification will go here
  </div>
-->

  <td id="mainPanel">

  <div id="overview" style="display:none;">
    <div class="section">
      <h2><em>Server Nodes</em></h2>
      <p id="server_list_container">
      </p>
      <div id="server_list_template" class="template">
        <table><tbody>
          <!-- {% $.each(rows, function (index) { %} -->
          <tr class="primary"><td class="expander">+
            <td class="name">{%= h(this.name) %}
            <td class="port">Port {%= h(_.values(this.ports).join(', ')) %}
            <td class="status">{% if (this.running) { %}
                Running
              {% } else { %}
                Down
              {% } %}
          <tr class="details"><td colspan="3">
            <div class="first">
              <table>
                <tr><td>Uptime:<td>{%= h(formatUptime(this.uptime)) %}
                <tr><td>Cache:<td>{%= h(this.cache) %}
                <tr><td>Threads:<td>{%= h(this.threads) %}
                <tr><td colspan="2"><hr>
                <tr><td>Version:<td>{%= h(this.version) %}
                <tr><td>OS:<td>{%= h(this.os) %}
              </table>
            </div>
          </td></tr>
         <!-- {% }); %} -->
        </tbody></table>
      </div>
    </div>
  </div>

  <div id="analytics" style="display:none">
	<h1>Analytics: Exerciser App</h1>
	<!-- shadow box -->
	<div class="shadow_box"><div class="top"><div><div></div></div></div><div class="cnt"><div class="pad"><div class="content">
    <div class="section">
      <h2 class="header_2">
		<div class="nav float_right">
			<a class="current">1 Hour</a> | <a>24 Hour</a>
		</div>
	  System overview: <span><a id='analytics_graph_zoom_real_time'>Live View</a>
      </span>
	  </h2>
      <p class="analytics_graph_main">
		<span class="graph_info_label block right">3 active nodes last collected 5 seconds ago</span>
		<span id="analytics_main_graph"></span>
	  </p>
      <p class="darker_block graph_nav">
		  <span id="analytics_graph_ops"></span>
		  <span id="analytics_graph_gets"></span>
		  <span id="analytics_graph_sets"></span>
		  <span id="analytics_graph_misses"></span>
		  <b class="clear"></b>
      </p>
    </div>
	</div></div></div><div class="bottom"><div><div></div></div></div></div>
	<!-- END shadow box -->
	<h1>Key Values: Exerciser App</h1>
	<!-- shadow box -->
	<div class="shadow_box"><div class="top"><div><div></div></div></div><div class="cnt"><div class="pad"><div class="content">
    <div class="section">
      <h2 class="header_2"><span class="stat_target_name"></span> - Top Key Values <span>Interval
      <a id='analytics_keys_zoom_real_time'>Real time</a>
      </span></h2>
      <p id="top_keys_container">
      </p>
      <div id="top_keys_template" class="template">
        <table>
          <tr><th>Top Key Values
            <th>Type
            <th>Gets
            <th>Misses
            <th>Total
          {% $.each(rows, function () { %}
            <tr><td>{%= h(this.name) %}
                <td>{%= h(this.type) %}
                <td>{%= h(this.gets) %}
                <td>{%= h(this.misses) %}
                <td>{%= h(this.total) %}
          {% }); %}
        </table>
      </div>
    </div>
	</div></div></div><div class="bottom"><div><div></div></div></div></div>
	<!-- END shadow box -->
  </div>

  <div id="buckets" style="display:none">
    <p><a href="javascript:nav.go('overview')">Cluster Overview</a> &gt; Buckets
    <button onclick="BucketsSection.startCreate();">Add a New Bucket</button>
    <div id="bucket_list_container">
    </div>
    <div id="bucket_list_template" class="template">
        <table>
          <tr><th>Name<th>Ops/Sec<th>Evictions/Sec<th>Cache Used<th>Cache Size
          <!-- {% $.each(rows, function () { %} -->
            <tr><td>{%= h(this.name) %}
              <td>{%= h(this.basicStats.opsPerSec) %}
              <td>{%= h(this.basicStats.evictionsPerSec) %}
              <td>{%= h(this.basicStats.cachePercentUsed) %}
              <td>{%= h(this.basicStats.cacheSize) %}
              <td><a href="{%=jsLink('BucketsSection.showBucket',this.uri)%}">Bucket Properties</a>
            </tr> <!-- This tr is important. Otherwise browser may close row after end of loop, causing incorrect resultant markup -->
          <!-- {% }); %} -->
        </table>
    </div>
  </div>

  <div id="alerts" style="display:none">
    <ul class="tabs">
      <li><a href="#">Current Alerts</a>
      <li><a href="#">Alert Settings</a>
      <li><a href="#">Log</a>
    </ul>
    <div class="panes">
      <div id="alerts_list">
        <p>Alerts are being sent to: <span id="alerts_email_setting"></span><a href='javascript:AlertsSection.changeEmail(),void(0);'>Change this</a></p>
        <ol id="alert_list_container">
        </ol>
        <ol id="alert_list_template" class="template">
          <!-- {% _.each(rows, function (alert) { %} -->
          <li class="alert_{%= h(alert.type) %}"><h3>{%= formatAlertType(alert.type) %} - {%= h(alert.shortText) %}</h3>
          <span class="time">{%= h(formatAlertTStamp(alert.tstamp)) %}</span><p>
          {%= h(alert.text) %}
          </p></li>
          <!-- {% }); %} -->
        </ol>
      </div>
      <div>
        <h3>Alert Setting</h3>
        <input type="hidden" id="alerts_settings_form_is_clean" value="1">
        <form id="alerts_settings_form" onsubmit="javascript:return false;">
        <p><label><input type="checkbox" name="sendAlerts" value="1"><input type="hidden" value="0" name="sendAlerts">
        Notify me by email with alerts</label></p>
        <div id="alerts_settings_guts" style="display:none;">
          <p><label>Email Address <input type="text" name="email"></label></p>
          <h4>Alert Types</h4>
          <p>Alert me when:
          <ul>
            <li><label><input type="checkbox" value="1" name="sendForLowSpace"><input type="hidden" value="0" name="sendForLowSpace">
            ... a server is low on disk space.</label>
            <li><label><input type="checkbox" value="1" name="sendForLowMemory"><input type="hidden" value="0" name="sendForLowMemory">
            ... a server is low on available memory.</label>
            <li><label><input type="checkbox" value="1" name="sendForNotResponding"><input type="hidden" value="0" name="sendForNotResponding">
            ... a server is not responding.</label>
            <li><label><input type="checkbox" value="1" name="sendForJoinsCluster"><input type="hidden" value="0" name="sendForJoinsCluster">
            ... a new server joins cluster.</label>
            <li><label><input type="checkbox" value="1" name="sendForOpsAboveNormal"><input type="hidden" value="0" name="sendForOpsAboveNormal">
            ... average daily ops/second is above normal.</label>
            <li><label><input type="checkbox" value="1" name="sendForSetsAboveNormal"><input type="hidden" value="0" name="sendForSetsAboveNormal">
            ... average daily sets/second is above normal.</label>
          </ul>
        </div>
        <p><a href="javascript:AlertsSection.settingsCancel(),void(0);">Cancel</a>
          <button type="submit">Save</button></p>
        </form>
      </div>
      <div>
        <p>Log is here</p>
      </div>
    </div>
  </div><div id="settings" style="display:none">
    This is settings
  </div>

</tr>
</table>

<div class="jqmWindow" id="login_dialog">

<!-- <a href="#" class="jqmClose">Close</a> -->
<!-- <hr> -->
<form id="login_form">
  <label>Login:<input name="login"></label>
  <label>Password:<input name="password"></label>
  <input type="submit">
</form>
<script>
  $('#login_form').bind('submit', function (e) {
    e.preventDefault();
    loginFormSubmit();
  });
</script>
</div>
<div class="jqmWindow" id="bucket_details_dialog_container">
</div>
<div id="bucket_details_dialog_template" class="template">
<a href="#" class="jqmClose">Close</a>
<hr>
<p>Bucket properties for {%= h(b.name) %}</p>
<p>Bucket name: {%= h(b.name) %}</p>
<p>Cache size: {%= h(b.basicStats.cacheSize) %} MB <button type="button" onclick="{%=jsLink('BucketsSection.startFlushCache', b.uri)%}">Flush All</button></p>
<p>Password: *****</p>
<p>Sample connection string: <textarea rows="3" readonly>sample connection string here</textarea></p>
</div>
<div class="jqmWindow" id="add_new_bucket_dialog">
  <h1>Add New Bucket</h1>
  <div id="add_new_bucket_errors_container"></div>
  <div id="add_new_bucket_errors_template" class="template">
    Couldn't create bucket due to:
    <ul>
      <!-- {% _.each(rows, function (e) { %} -->
      <li>{%= h(e) %}
      <!-- {% }); %} -->
    </ul>
  </div>

  <form id="add_new_bucket_form">
  <p><label>Bucket Name<input type="text" name="name"></label>
  <p><label>Cache Size<input type="text" name="cacheSize"><span class="cache-details"></span></label>
  <p><label><input type="checkbox" value="1" name="reserveInAdvance">Reserve memory in advance</label>
  <p>Password<input type="password" name="password" autocomplete="off">
  <p>Verify Password<input type="password" name="verifyPassword" autocomplete="off"> <span class="dont-match">Password don't match</span>
  <p><a href="#" class="jqmClose">cancel</a> <button type="submit">Add Bucket</button>
  </form>
</div>
<div class="jqmWindow" id="flush_cache_dialog_container">
</div>
<div class="template" id="flush_cache_dialog_template">
  <h1>Are you sure you want to flush all items in {%=h(bucket.name)%}</h1>
  <table><tr><td>Cache Size<td>{%=h(bucket.basicStats.cacheSize)%}
     [MB x {%=h(DAO.getBucketNodesCount(bucket))%} = {%=h(DAO.getBucketNodesCount(bucket) * bucket.basicStats.cacheSize)%}MB Total Cache]
    <tr><td>Total Items Stored<td>{%=h(bucket.basicStats.totalItemsStored)%}
  </table>
  <p><a href='#' class="jqmClose">cancel</a>
     <button type="button"
     onclick="{%=renderJSLink('BucketsSection.completeFlushCache', bucket.uri, '')%}">Flush</button></p>
</div>

</div> <!-- mainContainer -->

<div id="footer">
  <h1>Copyright 2010 <a href="http://northscale.com">NorthScale, Inc.</a> All rights reserved.</h1>
</div>

</div> <!-- container -->

</body>
</html>
